import streamlit as st

# -------------------------------------------------
# 1. роирпВро▓роХ роЗро▒роХрпНроХрпБроородро┐ (Library Import)
# -------------------------------------------------
try:
    import tamilrulepy
    # роорпЖропрпНроорпНрооропроХрпНроХроорпН ро╡ро┐родро┐роХро│рпИ роЗро▒роХрпНроХрпБроородро┐ роЪрпЖропрпНродро▓рпН
    from tamilrulepy.meymayakkam import (
        meymayakkam1, meymayakkam2, meymayakkam3, meymayakkam4, meymayakkam5,
        meymayakkam6, meymayakkam7, meymayakkam8, meymayakkam9, meymayakkam10,
        meymayakkam11, meymayakkam12, meymayakkam13, meymayakkam14, meymayakkam15,
        meymayakkam16, meymayakkam17, meymayakkam18
    )
    
    # рооро▒рпНро▒ ро╡ро┐родро┐роХро│рпИ роЗроЩрпНроХрпЗропрпЗ роЪрпЗро░рпНроХрпНроХ роорпБропро▒рпНроЪро┐рокрпНрокрпЛроорпН (роТро░рпБро╡рпЗро│рпИ роирпВро▓роХродрпНродро┐ро▓рпН роЗро░рпБроирпНродро╛ро▓рпН)
    # роХрпБро▒ро┐рокрпНрокрпБ: роирпВро▓роХродрпНродро┐ро▓рпН роЗро╡рпИ роЗро▓рпНро▓рпИропрпЖройро┐ро▓рпН рокро┐ро┤рпИ ро╡ро░ро╛рооро▓рпН родро╡ро┐ро░рпНроХрпНроХ try-except рокропройрпНрокроЯрпБродрпНродрокрпНрокроЯрпНроЯрпБро│рпНро│родрпБ
    try:
        from tamilrulepy import mozhi_muthal, mozhi_iruthi, punarchi
    except:
        mozhi_muthal, mozhi_iruthi, punarchi = None, None, None

    # роорпЖропрпНроорпНрооропроХрпНроХ ро╡ро┐родро┐роХро│рпИ роТро░рпБ рокроЯрпНроЯро┐ропро▓ро┐ро▓рпН роЪрпЗро░рпНродрпНродро▓рпН
    meymayakkam_rules = [
        meymayakkam1, meymayakkam2, meymayakkam3, meymayakkam4, meymayakkam5,
        meymayakkam6, meymayakkam7, meymayakkam8, meymayakkam9, meymayakkam10,
        meymayakkam11, meymayakkam12, meymayakkam13, meymayakkam14, meymayakkam15,
        meymayakkam16, meymayakkam17, meymayakkam18
    ]
    status = True
except Exception as e:
    status = False
    error_msg = str(e)

# -------------------------------------------------
# 2. рокроХрпНроХ ро╡роЯро┐ро╡роорпИрокрпНрокрпБ
# -------------------------------------------------
st.set_page_config(page_title="Tolkapy - родрпКро▓рпНроХро╛рокрпНрокро┐роп роЖропрпНро╡рпБ", layout="wide")

st.title("ЁЯУЬ Tolkapy (родрпКро▓рпНроХро╛рокрпНрокро┐)")
st.subheader("роЗро▓роХрпНроХрог роЖропрпНро╡рпБроЪрпН роЪрпЖропро▓ро┐ (роорпЖропрпНроорпНрооропроХрпНроХроорпН, роорпКро┤ро┐роорпБродро▓рпН, роЗро▒рпБродро┐, рокрпБрогро░рпНроЪрпНроЪро┐)")

if not status:
    st.error(f"тЭМ роирпВро▓роХродрпНродрпИ роПро▒рпНро▒ роорпБроЯро┐ропро╡ро┐ро▓рпНро▓рпИ: {error_msg}")
    st.info("роЙродро╡ро┐: 'vidhikal' роОройрпНрокродро▒рпНроХрпБрокрпН рокродро┐ро▓рпН роирпЗро░роЯро┐ропро╛роХродрпН родрпКроХрпБрокрпНрокрпБроХро│рпИ роЕро┤рпИроХрпНроХ ро╡рпЗрогрпНроЯрпБроорпН.")
    st.stop()

# -------------------------------------------------
# 3. рокро┐ро░ро┐ро╡рпБроХро│рпН (Tabs)
# -------------------------------------------------
tab1, tab2, tab3, tab4 = st.tabs(["роорпЖропрпНроорпНрооропроХрпНроХроорпН", "роорпКро┤ро┐роорпБродро▓рпН", "роорпКро┤ро┐ропро┐ро▒рпБродро┐", "рокрпБрогро░рпНроЪрпНроЪро┐"])

# --- TAB 1: роорпЖропрпНроорпНрооропроХрпНроХроорпН ---
with tab1:
    st.header("роорпЖропрпНроорпНрооропроХрпНроХроорпН роЖропрпНро╡рпБ")
    word_m = st.text_input("роЪрпКро▓рпНро▓рпИ роЙро│рпНро│ро┐роЯро╡рпБроорпН:", placeholder="роО.роХро╛: родроЩрпНроХроорпН", key="m1")
    if st.button("роЖро░ро╛ропрпНроХ", key="b1"):
        results_found = False
        for i, rule_func in enumerate(meymayakkam_rules, 1):
            res = rule_func(word_m)
            if res:
                st.success(f"тЬЕ ро╡ро┐родро┐ {i}: {res}")
                results_found = True
        if not results_found:
            st.warning("ро╡ро┐родро┐роХро│рпН роОродрпБро╡рпБроорпН рокрпКро░рпБроирпНродро╡ро┐ро▓рпНро▓рпИ.")

# --- TAB 2: роорпКро┤ро┐роорпБродро▓рпН ---
with tab2:
    st.header("роорпКро┤ро┐роорпБродро▓рпН роЖропрпНро╡рпБ")
    word_f = st.text_input("роЪрпКро▓рпНро▓рпИ роЙро│рпНро│ро┐роЯро╡рпБроорпН:", placeholder="роО.роХро╛: родрооро┐ро┤рпН", key="f1")
    if st.button("роЪро░ро┐рокро╛ро░рпН", key="b2"):
        if mozhi_muthal:
            # роирпВро▓роХродрпНродро┐ро▓рпН роЙро│рпНро│ роЪрпЖропро▓рпНрокро╛роЯрпНроЯрпИ роЕро┤рпИродрпНродро▓рпН
            st.info("роорпКро┤ро┐роорпБродро▓рпН ро╡ро┐родро┐роХро│рпН роЖропрпНро╡рпБ роЪрпЖропрпНропрокрпНрокроЯрпБроХро┐ройрпНро▒рой...")
        else:
            st.warning("роЗроирпНрод ро╡роЪродро┐ родро▒рпНроХро╛ро▓ро┐роХрооро╛роХ роирпВро▓роХродрпНродро┐ро▓рпН роЗро▓рпНро▓рпИ.")

# --- TAB 3: роорпКро┤ро┐ропро┐ро▒рпБродро┐ ---
with tab3:
    st.header("роорпКро┤ро┐ропро┐ро▒рпБродро┐ роЖропрпНро╡рпБ")
    word_e = st.text_input("роЪрпКро▓рпНро▓рпИ роЙро│рпНро│ро┐роЯро╡рпБроорпН:", placeholder="роО.роХро╛: роиро┐ро▓ройрпН", key="e1")
    if st.button("роЪро░ро┐рокро╛ро░рпН", key="b3"):
        st.info("роорпКро┤ро┐ропро┐ро▒рпБродро┐ ро╡ро┐родро┐роХро│рпН роЖропрпНро╡рпБ роЪрпЖропрпНропрокрпНрокроЯрпБроХро┐ройрпНро▒рой...")

# --- TAB 4: рокрпБрогро░рпНроЪрпНроЪро┐ ---
with tab4:
    st.header("рокрпБрогро░рпНроЪрпНроЪро┐ роЖропрпНро╡рпБ")
    c1, c2 = st.columns(2)
    with c1: n_mozhi = st.text_input("роиро┐ро▓рпИроорпКро┤ро┐:", key="n1")
    with c2: v_mozhi = st.text_input("ро╡ро░рпБроорпКро┤ро┐:", key="v1")
    if st.button("рокрпБрогро░рпНроХрпНроХ", key="b4"):
        st.code(f"{n_mozhi} + {v_mozhi}")
        st.write("рокрпБрогро░рпНроЪрпНроЪро┐ ро╡ро┐родро┐роХро│рпН роХрпБро▒ро┐родрпНрод родроХро╡ро▓рпНроХро│рпН роЗрогрпИроХрпНроХрокрпНрокроЯрпБроХро┐ройрпНро▒рой.")

st.divider()
st.caption("роЙро░рпБро╡ро╛роХрпНроХроорпН: роорпБройрпИро╡ро░рпН роЪродрпНродро┐ропро░ро╛роЪрпБ родроЩрпНроХроЪрпНроЪро╛рооро┐, рокро│рпНро│роорпЛро░рпНроХрпНроХрпБро│роорпН, роЗро░ро╛роороиро╛родрокрпБро░роорпН рооро╛ро╡роЯрпНроЯроорпН")
