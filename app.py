import streamlit as st
import os
import sys
import subprocess

# рокроХрпНроХродрпН родро▓рпИрокрпНрокрпБ
st.set_page_config(page_title="родрпКро▓рпНроХро╛рокрпИ", page_icon="ЁЯУЬ")
st.title("ЁЯУЬ родрпКро▓рпНроХро╛рокрпИ - роЪро░ро┐рокро╛ро░рпНрокрпНрокро╛ройрпН")

# 1. роирпВро▓роХроорпН роЗро░рпБрокрпНрокродрпИ роЙро▒рпБродро┐ роЪрпЖропрпНродрпБ рокро╛родрпИропрпИ (Path) роЗрогрпИродрпНродро▓рпН
try:
    import tolkapy
except ImportError:
    # роТро░рпБро╡рпЗро│рпИ import роЪрпЖропрпНроп роорпБроЯро┐ропро╛ро╡ро┐роЯрпНроЯро╛ро▓рпН, pip роорпВро▓роорпН роорпАрогрпНроЯрпБроорпН роТро░рпБроорпБро▒рпИ роЗроЩрпНроХрпЗропрпЗ роиро┐ро▒рпБро╡рпБродро▓рпН
    subprocess.check_call([sys.executable, "-m", "pip", "install", "tolkapy"])
    import tolkapy

# 2. vidhikal родрпКроХрпБродро┐ропрпИ роЕрогрпБроХрпБродро▓рпН
try:
    from tolkapy import vidhikal
    st.success("роирпВро▓роХроорпН ро╡рпЖро▒рпНро▒ро┐роХро░рооро╛роХ роЗрогрпИроХрпНроХрокрпНрокроЯрпНроЯродрпБ!")
except ImportError:
    st.error("tolkapy роиро┐ро▒рпБро╡рокрпНрокроЯрпНроЯродрпБ, роЖройро╛ро▓рпН 'vidhikal' родрпКроХрпБродро┐ роХро┐роЯрпИроХрпНроХро╡ро┐ро▓рпНро▓рпИ.")
    st.write("роЙро│рпНро│рпЗ роЗро░рпБрокрпНрокро╡рпИ:", dir(tolkapy))
    st.stop()

# 3. рокропройро░рпН роЗроЯрпИроорпБроХроорпН
word = st.text_input("родрооро┐ро┤рпНроЪрпНроЪрпКро▓рпНро▓рпИ роЙро│рпНро│ро┐роЯро╡рпБроорпН:", "родрооро┐ро┤рпН")

if st.button("роЪро░ро┐рокро╛ро░рпН"):
    try:
        # tolkapy-ро▓рпН роЙро│рпНро│ tamil_word_checker роЕро▓рпНро▓родрпБ vidhikal-роРрокрпН рокропройрпНрокроЯрпБродрпНродрпБродро▓рпН
        # роЗроирпНрод роЪро╛ро░рпНрокрпБ рокрпЖропро░рпН роирпВро▓роХродрпНродрпИрокрпН рокрпКро▒рпБродрпНродрпБ рооро╛ро▒рпБрокроЯро▓ро╛роорпН
        if hasattr(vidhikal, 'tamil_word_checker'):
            res = vidhikal.tamil_word_checker(word)
            st.info(f"ро╡ро┐ро│рпИро╡рпБ: {res}")
        else:
            st.warning("ро╡ро┐родро┐роорпБро▒рпИроХро│рпИроЪрпН роЪро░ро┐рокро╛ро░рпНроХрпНроХрпБроорпН роЪро╛ро░рпНрокрпБ (Function) роХрогрпНроЯро▒ро┐ропрокрпНрокроЯро╡ро┐ро▓рпНро▓рпИ.")
            st.write("рокропройрпНрокроЯрпБродрпНродроХрпНроХрпВроЯро┐ропро╡рпИ:", dir(vidhikal))
    except Exception as e:
        st.error(f"родро╡ро▒рпБ: {e}")

st.divider()
st.caption("ро╡ро┤роЩрпНроХрпБрокро╡ро░рпН: роХрогро┐ропроорпН роЕро▒роХрпНроХроЯрпНроЯро│рпИ & роХрпБро┤рпБро╡ро┐ройро░рпН")
