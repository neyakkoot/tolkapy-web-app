import streamlit as st
import sys
import os

# рокроХрпНроХ ро╡роЯро┐ро╡роорпИрокрпНрокрпБ
st.set_page_config(page_title="родрпКро▓рпНроХро╛рокрпНрокро┐ - родрооро┐ро┤рпН роЪрпКро▓рпН роЪро░ро┐рокро╛ро░рпНрокрпНрокро╛ройрпН", page_icon="ЁЯУЬ")

st.title("ЁЯУЬ родрпКро▓рпНроХро╛рокрпНрокро┐ (Tolkapy)")
st.subheader("родрпКро▓рпНроХро╛рокрпНрокро┐роп роЗро▓роХрпНроХрог ро╡ро┐родро┐рокрпНрокроЯро┐ родрооро┐ро┤рпН роЪрпКро▒рпНроХро│рпИроЪрпН роЪро░ро┐рокро╛ро░рпНроХрпНроХ")

# роирпВро▓роХродрпНродрпИ ро╡ро▓рпБроХрпНроХроЯрпНроЯро╛ропрооро╛роХ роЗрогрпИроХрпНроХрпБроорпН роорпБропро▒рпНроЪро┐ (Import fix)
try:
    import tolkapy
    # tolkapy роЙро│рпНро│рпЗ vidhikal роЗро░рпБроХрпНроХро┐ро▒родро╛ роОройрокрпН рокро╛ро░рпНроХрпНроХро┐ро▒рпЛроорпН
    try:
        from tolkapy import vidhikal
    except ImportError:
        # роТро░рпБро╡рпЗро│рпИ vidhikal роирпЗро░роЯро┐ропро╛роХ роЗро▓рпНро▓ро╛рооро▓рпН роЗро░рпБроирпНродро╛ро▓рпН
        vidhikal = None
except ImportError:
    st.error("роирпВро▓роХродрпНродрпИ роЗрогрпИрокрпНрокродро┐ро▓рпН роЪро┐роХрпНроХро▓рпН. родропро╡рпБроЪрпЖропрпНродрпБ 'Reboot' роЪрпЖропрпНропро╡рпБроорпН.")
    st.stop()

# рокропройро░рпН роЙро│рпНро│рпАроЯрпБ
word = st.text_input("роЪро░ро┐рокро╛ро░рпНроХрпНроХ ро╡рпЗрогрпНроЯро┐роп родрооро┐ро┤рпН роЪрпКро▓рпНро▓рпИ роЙро│рпНро│ро┐роЯро╡рпБроорпН:", placeholder="роО.роХро╛: родрооро┐ро┤рпН")

if st.button("роЪро░ро┐рокро╛ро░рпН"):
    if word:
        try:
            # tolkapy роирпВро▓роХродрпНродро┐ро▓рпН роЙро│рпНро│ роЪро░ро┐ропро╛рой роЪро╛ро░рпНрокрпИ (Function) роЕро┤рпИродрпНродро▓рпН
            # роЙроЩрпНроХро│рпН рокро┐ро┤рпИ роЕро▒ро┐роХрпНроХрпИропро┐ройрпНрокроЯро┐ vidhikal родрпКроХрпБродро┐ропро┐ро▓рпН роЙро│рпНро│ ро╡ро┐родро┐роХро│рпИроЪрпН роЪрпЛродро┐роХрпНроХро┐ро▒рпЛроорпН
            if hasattr(vidhikal, 'tamil_word_checker'):
                result = vidhikal.tamil_word_checker(word)
                st.info(f"роЖропрпНро╡рпБ роорпБроЯро┐ро╡рпБ: {result}")
            elif hasattr(tolkapy, 'vidhikal'):
                result = tolkapy.vidhikal.tamil_word_checker(word)
                st.info(f"роЖропрпНро╡рпБ роорпБроЯро┐ро╡рпБ: {result}")
            else:
                st.warning("роирпВро▓роХроорпН роЗрогрпИроирпНродрпБро│рпНро│родрпБ, роЖройро╛ро▓рпН 'tamil_word_checker' роОройрпНро▒ роЪро╛ро░рпНрокрпБ роХрогрпНроЯро▒ро┐ропрокрпНрокроЯро╡ро┐ро▓рпНро▓рпИ.")
                st.write("роХро┐роЯрпИроХрпНроХроХрпНроХрпВроЯро┐роп роЪрпЖропро▓рпНрокро╛роЯрпБроХро│рпН:", dir(vidhikal) if vidhikal else dir(tolkapy))
                
        except Exception as e:
            st.error(f"рокро┐ро┤рпИ роПро▒рпНрокроЯрпНроЯродрпБ: {e}")
    else:
        st.info("родропро╡рпБроЪрпЖропрпНродрпБ роТро░рпБ роЪрпКро▓рпНро▓рпИ роЙро│рпНро│ро┐роЯро╡рпБроорпН.")

st.markdown("---")
st.write("ЁЯФН **родрпКро┤ро┐ро▓рпНроирпБроЯрпНрокродрпН родроХро╡ро▓рпН:**")
st.text(f"Python version: {sys.version}")
st.text(f"Tolkapy Location: {os.path.dirname(tolkapy.__file__)}")
