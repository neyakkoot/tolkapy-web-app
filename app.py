import streamlit as st

# -------------------------------------------------
# Page Configuration
# -------------------------------------------------
st.set_page_config(
    page_title="Tolkapy | родрпКро▓рпНроХро╛рокрпНрокро┐роп роЖропрпНро╡рпБ",
    page_icon="ЁЯУЬ",
    layout="centered"
)

# -------------------------------------------------
# Try importing Tolkapy
# -------------------------------------------------
try:
    import tolkapy
    from tolkapy import vidhikal
    status = True
except Exception as e:
    status = False
    error_msg = e

# -------------------------------------------------
# Title
# -------------------------------------------------
st.title("ЁЯУЬ Tolkapy")
st.subheader("родрпКро▓рпНроХро╛рокрпНрокро┐роп ро╡ро┐родро┐ роЖропрпНро╡рпБроХрпН роХро░рпБро╡ро┐")
st.divider()

# -------------------------------------------------
# If Tolkapy is not available
# -------------------------------------------------
if not status:
    st.error(f"тЭМ Tolkapy load роЖроХро╡ро┐ро▓рпНро▓рпИ: {error_msg}")
    st.info("""
### ЁЯФз родрпАро░рпНро╡рпБ

`requirements.txt` роХрпЛрокрпНрокро┐ро▓рпН роЗродрпИ роороЯрпНроЯрпБроорпН ро╡рпИродрпНродро┐ро░рпБроЩрпНроХро│рпН:


рокро┐ройрпНройро░рпН:
1. GitHub-ро▓рпН commit & push роЪрпЖропрпНропро╡рпБроорпН  
2. Streamlit Cloud тЖТ **Manage App тЖТ Reboot App**
""")
    st.stop()

# -------------------------------------------------
# Rule Selection
# -------------------------------------------------
rule = st.selectbox(
    "ЁЯФ╜ роЖропрпНро╡рпБ ро╡ро┐родро┐ропрпИродрпН родрпЗро░рпНро╡рпБ роЪрпЖропрпНропро╡рпБроорпН",
    [
        "роорпЖропрпНроорпНрооропроХрпНроХроорпН",
        "роорпКро┤ро┐роорпБродро▓рпН (ро╡ро┐ро░рпИро╡ро┐ро▓рпН)",
        "роорпКро┤ро┐ропро┐ро▒рпБродро┐ (ро╡ро┐ро░рпИро╡ро┐ро▓рпН)",
        "рокрпБрогро░рпНроЪрпНроЪро┐ (ро╡ро┐ро░рпИро╡ро┐ро▓рпН)"
    ]
)

# -------------------------------------------------
# Word Input
# -------------------------------------------------
word = st.text_input(
    "ЁЯФд родрооро┐ро┤рпН роЪрпКро▓рпНро▓рпИ роЙро│рпНро│ро┐роЯро╡рпБроорпН",
    placeholder="роЙродро╛: роХро▒рпНро▒ро▓рпН"
)

# -------------------------------------------------
# Analyse Button
# -------------------------------------------------
if st.button("ЁЯФН роЖро░ро╛ропрпНроХ"):

    if not word.strip():
        st.warning("тЪая╕П родропро╡рпБроЪрпЖропрпНродрпБ роТро░рпБ родрооро┐ро┤рпН роЪрпКро▓рпНро▓рпИ роЙро│рпНро│ро┐роЯро╡рпБроорпН")
    else:
        try:
            if rule == "роорпЖропрпНроорпНрооропроХрпНроХроорпН":
                result = vidhikal.meymayakkam_checker(word)

                if result is True:
                    st.success(f"тЬЕ **{word}** тАФ роорпЖропрпНроорпНрооропроХрпНроХроорпН ро╡ро┐родро┐роХрпНроХрпБ роПро▒рпНрок роЙро│рпНро│родрпБ")
                    st.balloons()
                else:
                    st.warning(f"тЪая╕П роЖропрпНро╡рпБ роорпБроЯро┐ро╡рпБ: {result}")

            else:
                st.info("тД╣я╕П роЗроирпНрод ро╡ро┐родро┐ ро╡ро┐ро░рпИро╡ро┐ро▓рпН Tolkapy-ропро┐ро▓рпН роЪрпЗро░рпНроХрпНроХрокрпНрокроЯрпБроорпН")

        except Exception as e:
            st.error(f"тЭМ роЖропрпНро╡ро┐ро▓рпН рокро┐ро┤рпИ: {e}")

# -------------------------------------------------
# Footer
# -------------------------------------------------
st.divider()
st.caption("ро╡ро┤роЩрпНроХрпБрокро╡ро░рпН: роХрогро┐ропроорпН роЕро▒роХрпНроХроЯрпНроЯро│рпИ & Tolkapy роХрпБро┤рпБ")
