import streamlit as st
import sys

# 1. рокроХрпНроХ ро╡роЯро┐ро╡роорпИрокрпНрокрпБ
st.set_page_config(page_title="родрпКро▓рпНроХро╛рокрпНрокро┐ - роорпЖропрпНрооропроХрпНроХроорпН", page_icon="ЁЯУЬ")

# 2. роирпВро▓роХродрпНродрпИ роЗрогрпИродрпНродро▓рпН
try:
    import tamilrulepy
    # роТро░рпБро╡рпЗро│рпИ vidhikal роОройрпНрокродрпБ роЙро│рпНро│рпЗропрпЗ роЗро░рпБроирпНродро╛ро▓рпН роЕродрпИ роОроЯрпБроХрпНроХ роорпБропро▒рпНроЪро┐рокрпНрокрпЛроорпН
    if hasattr(tamilrulepy, 'vidhikal'):
        rules = tamilrulepy.vidhikal
    else:
        rules = tamilrulepy # роЗро▓рпНро▓рпИропрпЖройро┐ро▓рпН роирпЗро░роЯро┐ роирпВро▓роХродрпНродрпИропрпЗ рокропройрпНрокроЯрпБродрпНродрпБро╡рпЛроорпН
    
    st.success("тЬЕ родрпКро▓рпНроХро╛рокрпНрокро┐роп ро╡ро┐родро┐роХро│рпН родропро╛ро░рпН!")
except ImportError:
    st.error("тЭМ 'tolkapy' роирпВро▓роХроорпН роиро┐ро▒рпБро╡рокрпНрокроЯро╡ро┐ро▓рпНро▓рпИ. requirements.txt роХрпЛрокрпНрокрпИроЪрпН роЪро░ро┐рокро╛ро░рпНроХрпНроХро╡рпБроорпН.")
    st.stop()

# 3. рокропройро░рпН роЗроЯрпИроорпБроХроорпН
st.title("ЁЯУЬ родрпКро▓рпНроХро╛рокрпНрокро┐ (Tolkapy)")
st.subheader("родрооро┐ро┤рпН роорпЖропрпНрооропроХрпНроХроорпН ро╡ро┐родро┐ роЪро░ро┐рокро╛ро░рпНрокрпНрокро╛ройрпН")
st.write("родрпКро▓рпНроХро╛рокрпНрокро┐роп роЗро▓роХрпНроХрог ро╡ро┐родро┐роХро│ро┐ройрпНрокроЯро┐ родрооро┐ро┤рпН роЪрпКро▒рпНроХро│рпИроЪрпН роЪро░ро┐рокро╛ро░рпНроХрпНроХрпБроорпН родро│роорпН.")

word = st.text_input("роЪро░ро┐рокро╛ро░рпНроХрпНроХ ро╡рпЗрогрпНроЯро┐роп родрооро┐ро┤рпН роЪрпКро▓рпНро▓рпИ роЙро│рпНро│ро┐роЯро╡рпБроорпН:", "родрооро┐ро┤рпН")

if st.button("роЪро░ро┐рокро╛ро░рпН"):
    if word:
        try:
            # роиро╛роорпН роорпБройрпНрокрпБ роХрогрпНроЯро▒ро┐роирпНрод 'meymayakkam_checker' роЪро╛ро░рпНрокрпИрокрпН рокропройрпНрокроЯрпБродрпНродрпБроХро┐ро▒рпЛроорпН
            if hasattr(rules, 'meymayakkam_checker'):
                result = rules.meymayakkam_checker(word)
                
                if result == True or str(result).strip().lower() == "true":
                    st.balloons()
                    st.success(f"тЬЕ '{word}' - роорпЖропрпНрооропроХрпНроХроорпН ро╡ро┐родро┐роХро│ро┐ройрпНрокроЯро┐ роЪро░ро┐ропро╛рой роЪрпКро▓рпН.")
                else:
                    st.warning(f"тЪая╕П роЖропрпНро╡рпБ роорпБроЯро┐ро╡рпБ: {result}")
            else:
                st.error("рооройрпНройро┐роХрпНроХро╡рпБроорпН, роирпВро▓роХродрпНродро┐ро▓рпН роЪро░ро┐рокро╛ро░рпНрокрпНрокрпБроЪрпН роЪро╛ро░рпНрокрпБ (meymayakkam_checker) роХрогрпНроЯро▒ро┐ропрокрпНрокроЯро╡ро┐ро▓рпНро▓рпИ.")
                st.write("роХро┐роЯрпИроХрпНроХроХрпНроХрпВроЯро┐ропро╡рпИ:", dir(rules))
                
        except Exception as e:
            st.error(f"роЖропрпНро╡рпБ роЪрпЖропрпНро╡родро┐ро▓рпН рокро┐ро┤рпИ: {e}")
    else:
        st.info("родропро╡рпБроЪрпЖропрпНродрпБ роТро░рпБ роЪрпКро▓рпНро▓рпИ роЙро│рпНро│ро┐роЯро╡рпБроорпН.")

st.divider()
st.caption("ро╡ро┤роЩрпНроХрпБрокро╡ро░рпН: роХрогро┐ропроорпН роЕро▒роХрпНроХроЯрпНроЯро│рпИ & Tolkapy роХрпБро┤рпБро╡ро┐ройро░рпН")
